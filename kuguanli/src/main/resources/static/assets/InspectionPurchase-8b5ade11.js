import{B as C}from"./BgContainer-d59c353d.js";import{u as V,g as I}from"./purchaseOrder-b04f9821.js";import{_ as x,r as o,o as v,b as y,w as t,a as e,e as n,d as B}from"./index-402981fb.js";const O={components:{BgContainer:C},data(){return{purchaseOrders:[],dialogVisible:!1,checkItem:{}}},methods:{handleCheck(l){this.dialogVisible=!0,this.checkItem={...l}},handleDialogClose(l){this.$refs.checkForm.resetFields(),l()},handleConfirmCheck(){const{id:l,checkResult:s}=this.checkItem;console.log(l),V(l,{status:s?1:2}).then(()=>{this.dialogVisible=!1;const d=this.purchaseOrders.findIndex(p=>p.id===l);d!==-1&&this.purchaseOrders.splice(d,1)}).catch(()=>{this.$message.error("验货失败，请重试")})}},created(){I({status:0}).then(l=>this.purchaseOrders=l.data.data)}},D={slot:"footer",class:"dialog-footer"};function P(l,s,d,p,a,i){const r=o("el-table-column"),_=o("el-button"),m=o("el-table"),u=o("el-radio"),h=o("el-radio-group"),f=o("el-form-item"),b=o("el-form"),k=o("el-dialog"),g=o("BgContainer");return v(),y(g,null,{default:t(()=>[e(m,{data:a.purchaseOrders,border:"",stripe:""},{default:t(()=>[e(r,{prop:"id",label:"订单编号"}),e(r,{prop:"supplierId",label:"供应商编号"}),e(r,{prop:"orderDate",label:"下单日期"}),e(r,{prop:"expectedDeliveryDate",label:"预计交货日期"}),e(r,{prop:"status",label:"状态"}),e(r,{prop:"remark",label:"备注"}),e(r,{label:"操作"},{default:t(({row:c})=>[e(_,{size:"small",type:"primary",onClick:w=>i.handleCheck(c)},{default:t(()=>[n("验货")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"]),e(k,{title:"验货",modelValue:a.dialogVisible,"onUpdate:modelValue":s[2]||(s[2]=c=>a.dialogVisible=c),width:"30%","before-close":i.handleDialogClose},{default:t(()=>[e(b,{model:a.checkItem,ref:"checkForm","label-width":"80px"},{default:t(()=>[e(f,{label:"验货结果",required:""},{default:t(()=>[e(h,{modelValue:a.checkItem.checkResult,"onUpdate:modelValue":s[0]||(s[0]=c=>a.checkItem.checkResult=c)},{default:t(()=>[e(u,{label:!0},{default:t(()=>[n("合格")]),_:1}),e(u,{label:!1},{default:t(()=>[n("不合格")]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["model"]),B("div",D,[e(_,{onClick:s[1]||(s[1]=c=>a.dialogVisible=!1)},{default:t(()=>[n("取消")]),_:1}),e(_,{type:"primary",onClick:i.handleConfirmCheck},{default:t(()=>[n("确定")]),_:1},8,["onClick"])])]),_:1},8,["modelValue","before-close"])]),_:1})}const S=x(O,[["render",P],["__scopeId","data-v-378c70e6"]]);export{S as default};
